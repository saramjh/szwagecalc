"use strict";(self.webpackChunkszwagecalc=self.webpackChunkszwagecalc||[]).push([[200],{4429:(e,t,s)=>{s.d(t,{a:()=>k,b:()=>g,c:()=>j,d:()=>y,e:()=>w,f:()=>h});var a=s(9379),r=s(446),n=s.n(r),l=s(6865),o=s.n(l),d=s(7140),i=s.n(d),c=s(4462),u=s.n(c),x=s(8933),m=s.n(x),b=s(6632);n().extend(o()),n().extend(i()),n().extend(u()),n().extend(m());const f=new Map;function g(e,t){if(null===t||void 0===t||!t.weekly_allowance_enabled)return{eligible:!1,totalWorkHours:0,averageHourlyRate:0,allowanceAmount:0,workDays:0,reason:"\uc8fc\ud734\uc218\ub2f9 \uc801\uc6a9 \uc548\ud568"};const s=t.weekly_allowance_min_hours||15;let a=0,r=0,n=0,l=!1;const o=new Set;for(const u of e){if(u.job_id!==t.id||"hourly"!==u.wage_type)continue;if(u.is_unexcused_absence&&(l=!0),!u.start_time||!u.end_time)continue;a+=(0,b.c)(u.start_time,u.end_time,u.jobs||t).workHours,r+=(u.daily_wage||0)-(u.meal_allowance||0),o.add(u.date)}if(n=o.size,l)return{eligible:!1,totalWorkHours:Math.round(100*a)/100,averageHourlyRate:0,allowanceAmount:0,workDays:n,hasUnexcusedAbsence:!0,reason:"\ubb34\ub2e8\uacb0\uadfc\uc73c\ub85c \uc778\ud55c \uc8fc\ud734\uc218\ub2f9 \uc9c0\uae09 \ubd88\uac00"};if(a<s)return{eligible:!1,totalWorkHours:Math.round(100*a)/100,averageHourlyRate:0,allowanceAmount:0,workDays:n,hasUnexcusedAbsence:!1,reason:"\uc8fc\uac04 \uadfc\ubb34\uc2dc\uac04 \ubd80\uc871 (".concat(a.toFixed(1),"\uc2dc\uac04 < ").concat(s,"\uc2dc\uac04)")};if(0===n)return{eligible:!1,totalWorkHours:Math.round(100*a)/100,averageHourlyRate:0,allowanceAmount:0,workDays:0,hasUnexcusedAbsence:!1,reason:"\ud574\ub2f9 \uc9c1\uc5c5 \uadfc\ubb34\uc77c \uc5c6\uc74c"};const d=r>0?Math.round(r/a):0,i=a/n,c=Math.round(i*d);return{eligible:!0,totalWorkHours:Math.round(100*a)/100,averageHourlyRate:d,allowanceAmount:c,workDays:n,avgDailyHours:Math.round(100*i)/100,hasUnexcusedAbsence:!1,reason:"\uc8fc\ud734\uc218\ub2f9 \uc9c0\uae09 \ub300\uc0c1"}}function h(e,t){const s=n()(t),a=s.startOf("isoWeek"),r=s.endOf("isoWeek");return e.filter(e=>{const t=n()(e.date);return t.isSameOrAfter(a,"day")&&t.isSameOrBefore(r,"day")})}function k(e,t,s){const a=n()(s),r=a.startOf("month"),l=a.endOf("month"),o=[];let d=r.startOf("isoWeek");for(;d.isBefore(l)||d.isSame(l,"week");)o.push(d),d=d.add(1,"week");let i=0,c=0;const u=new Map;for(const n of o){const s=h(e,n);for(const e of t){if(!e.weekly_allowance_enabled)continue;const t=g(s,e);if(t.eligible&&t.allowanceAmount>0){i+=t.allowanceAmount,c++,u.has(e.id)||u.set(e.id,{jobName:e.job_name,jobColor:e.color,totalAmount:0,weekCount:0});const s=u.get(e.id);s.totalAmount+=t.allowanceAmount,s.weekCount++}}}return{totalAllowance:i,eligibleWeeks:c,totalWeeks:o.length,jobAllowances:Array.from(u.values())}}function w(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const r=n()(s),l=g(h(e,r),t),o=r.startOf("isoWeek"),d=r.endOf("isoWeek"),i=d.diff(o,"day")+1,c=r.diff(o,"day")+1,u=(null===t||void 0===t?void 0:t.weekly_allowance_min_hours)||15,x=Math.min(100,l.totalWorkHours/u*100);return(0,a.a)((0,a.a)({},l),{},{weekStart:o.format("YYYY-MM-DD"),weekEnd:d.format("YYYY-MM-DD"),daysInWeek:i,daysPassed:c,progressPercent:Math.round(x),hoursNeeded:Math.max(0,u-l.totalWorkHours),isCurrentWeek:!0})}function j(){f.clear()}function y(e){const t=n()(e),s=t.endOf("isoWeek"),a=Math.ceil(t.date()/7);return"".concat(t.format("M\uc6d4")," ").concat(a,"\uc8fc\ucc28 (").concat(t.format("M/D"),"~").concat(s.format("M/D"),")")}},5200:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});s(5043);var a=s(4429),r=s(8521),n=s(446),l=s.n(n),o=s(579);const d=e=>{let{workRecords:t,jobs:s,selectedDate:n=new Date}=e;const d=s.filter(e=>e.weekly_allowance_enabled);if(0===d.length)return null;const i=d.map(e=>({job:e,progress:(0,a.e)(t,e,n)})),c=i.some(e=>{let{progress:t}=e;return t.eligible});if(!i.some(e=>{let{progress:t}=e;return t.totalWorkHours>0}))return null;const u=(0,a.d)(l()(n).startOf("isoWeek"));return(0,o.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-700",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsxs)("h3",{className:"text-base font-semibold text-blue-900 dark:text-blue-100 flex items-center",children:[(0,o.jsx)(r.j,{className:"w-4 h-4 mr-2"}),"\uc8fc\ud734\uc218\ub2f9"]}),(0,o.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:u}),(0,o.jsx)("div",{className:"text-right",children:c?(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,o.jsx)("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:"\uc9c0\uae09 \ub300\uc0c1"})]}):(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,o.jsx)("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-400",children:"\uc9c4\ud589 \uc911"})]})})]}),(0,o.jsx)("div",{className:"space-y-3",children:i.map(e=>{var t;let{job:s,progress:a}=e;if(0===a.totalWorkHours)return null;const n=s.weekly_allowance_min_hours||15,l=Math.min(100,a.totalWorkHours/n*100);return(0,o.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:s.job_name}),a.hasUnexcusedAbsence&&(0,o.jsxs)("span",{className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded-full dark:bg-red-900/30 dark:text-red-400 flex items-center gap-1",children:[(0,o.jsx)(r.b,{className:"w-3 h-3"}),"\uacb0\uadfc"]})]}),(0,o.jsx)("div",{className:"text-right",children:a.hasUnexcusedAbsence?(0,o.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400 font-semibold",children:"\uc9c0\uae09 \ubd88\uac00"}):a.eligible?(0,o.jsxs)("div",{className:"text-xs text-green-600 dark:text-green-400 font-semibold",children:["+",null===(t=a.allowanceAmount)||void 0===t?void 0:t.toLocaleString(),"\uc6d0"]}):(0,o.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.hoursNeeded.toFixed(1),"\uc2dc\uac04 \ub0a8\uc74c"]})})]}),(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[(0,o.jsxs)("span",{children:[a.totalWorkHours.toFixed(1),"\uc2dc\uac04"]}),(0,o.jsxs)("span",{children:[n,"\uc2dc\uac04"]})]}),(0,o.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,o.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(a.hasUnexcusedAbsence?"bg-red-500":a.eligible?"bg-green-500":l>=80?"bg-orange-500":"bg-blue-500"),style:{width:"".concat(a.hasUnexcusedAbsence?100:l,"%")}})})]}),(0,o.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,o.jsxs)("span",{children:[a.workDays,"\uc77c \uadfc\ubb34"]}),a.eligible&&a.avgDailyHours&&(0,o.jsxs)("span",{children:["\ud3c9\uade0 ",a.avgDailyHours,"\uc2dc\uac04/\uc77c"]})]})]},s.id)})}),c&&(0,o.jsx)("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-700",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"\uc774\ubc88 \uc8fc \uc8fc\ud734\uc218\ub2f9"}),(0,o.jsxs)("span",{className:"text-base font-bold text-green-600 dark:text-green-400",children:["+",i.filter(e=>{let{progress:t}=e;return t.eligible}).reduce((e,t)=>{let{progress:s}=t;return e+(s.allowanceAmount||0)},0).toLocaleString(),"\uc6d0"]})]})})]})}}}]);