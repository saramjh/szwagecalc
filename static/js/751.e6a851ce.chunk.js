"use strict";(self.webpackChunkszwagecalc=self.webpackChunkszwagecalc||[]).push([[751],{61:(e,t,a)=>{a.d(t,{a:()=>r,b:()=>n});const r=[{id:"brand-purple",name:"\ube0c\ub79c\ub4dc \ud37c\ud50c",value:"var(--accent-primary)",textLight:"var(--accent-text)",textDark:"var(--accent-text)",inactive:"rgba(139, 92, 246, 0.25)"},{id:"success-green",name:"\uc11d\uc138\uc2a4 \uadf8\ub9b0",value:"var(--success-primary)",textLight:"var(--text-inverse)",textDark:"var(--text-inverse)",inactive:"rgba(34, 197, 94, 0.25)"},{id:"warning-orange",name:"\uc6cc\ub2dd \uc624\ub80c\uc9c0",value:"var(--warning-primary)",textLight:"var(--text-inverse)",textDark:"var(--text-inverse)",inactive:"rgba(249, 115, 22, 0.25)"},{id:"error-red",name:"\uc5d0\ub7ec \ub808\ub4dc",value:"var(--error-primary)",textLight:"var(--text-inverse)",textDark:"var(--text-inverse)",inactive:"rgba(239, 68, 68, 0.25)"},{id:"blue",name:"\ube14\ub8e8",value:"#2563EB",textLight:"#FFFFFF",textDark:"#FFFFFF",inactive:"rgba(37, 99, 235, 0.25)"},{id:"fuchsia",name:"\ud4e8\uc2dc\uc544",value:"#C026D3",textLight:"#FFFFFF",textDark:"#FFFFFF",inactive:"rgba(192, 38, 211, 0.25)"},{id:"coffee-brown",name:"\ucee4\ud53c \ube0c\ub77c\uc6b4",value:"#8B5E3C",textLight:"#FFFFFF",textDark:"#FFFFFF",inactive:"rgba(139, 94, 60, 0.25)"}],o=r[0],s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=r.find(t=>t.value===e);if(a)return t?a.textDark:a.textLight;if(!e)return t?"#FFFFFF":"#1F2937";if(e.startsWith("var("))return"var(--text-inverse)";const o=e.replace("#","");return(.299*parseInt(o.substr(0,2),16)+.587*parseInt(o.substr(2,2),16)+.114*parseInt(o.substr(4,2),16))/255>.5?"#1F2937":"#FFFFFF"},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.color||o.value,l=(i=n,r.find(e=>e.value===i)||o);var i;return t?{backgroundColor:n,color:s(n,a),borderColor:n}:{backgroundColor:l?l.inactive:"rgba(0,0,0,0.1)",color:"var(--text-secondary)",borderColor:l?l.inactive:"rgba(0,0,0,0.1)"}}},7751:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(5043),o=a(5843),s=a(8188),n=a(61),l=a(446),i=a.n(l),d=a(579);const c=e=>{let{isOpen:t,onClose:a,onSaveHourlyRate:l,session:c,jobs:u}=e;const{openModal:m,closeModal:g}=(0,s.a)(),[x,h]=(0,r.useState)(0),[v,f]=(0,r.useState)(null),[b,p]=(0,r.useState)(i()().format("YYYY-MM-DD")),[y,F]=(0,r.useState)(!1),[k,M]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t?(F(!0),setTimeout(()=>M(!0),10),m()):(M(!1),setTimeout(()=>F(!1),300),g())},[t,m,g]),(0,r.useEffect)(()=>()=>{g()},[g]),(0,r.useEffect)(()=>{t&&c&&v&&(async()=>{if(!c||!v)return;const{data:e,error:t}=await o.a.from("hourly_rate_history").select("hourly_rate, effective_date").eq("user_id",c.user.id).eq("job_id",v).order("effective_date",{ascending:!1}).limit(1);t?(console.error("Error fetching current hourly rate:",t),h(0),p(i()().format("YYYY-MM-DD"))):e&&e.length>0?(h(e[0].hourly_rate),p(e[0].effective_date)):(h(0),p(i()().format("YYYY-MM-DD")))})()},[t,c,v]),(0,r.useEffect)(()=>{t&&u.length>0&&!v&&f(u[0].id),t||(f(null),p(i()().format("YYYY-MM-DD")))},[t,u,v]);return y?(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center transition-opacity duration-300 ease-out ".concat(k?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"," z-layer-modal"),children:(0,d.jsxs)("div",{className:"bg-cream-white dark:bg-gray-900 rounded-2xl shadow-lg dark:shadow-2xl dark:shadow-black/50 p-6 w-full max-w-md mx-4 transform transition-all duration-300 ease-out ".concat(k?"translate-y-0":"translate-y-10"),children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-dark-navy dark:text-white",children:"\uc2dc\uae09 \uc124\uc815"}),(0,d.jsx)("button",{onClick:a,className:"text-medium-gray dark:text-light-gray hover:text-dark-navy dark:hover:text-white text-2xl transition-all duration-200 ease-in-out transform hover:scale-105",children:"\xd7"})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-medium-gray dark:text-light-gray",children:"\uc9c1\uc5c5 \uc120\ud0dd"}),(0,d.jsx)("div",{className:"mt-1 flex flex-wrap gap-2",children:0===u.length?(0,d.jsx)("p",{className:"text-sm text-medium-gray dark:text-light-gray",children:"\uc9c1\uc5c5\uc744 \ucd94\uac00\ud574\uc8fc\uc138\uc694"}):u.map(e=>(0,d.jsx)("button",{onClick:()=>f(e.id),className:"px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 hover:scale-105 transform",style:(0,n.b)(e,v===e.id),children:e.job_name},e.id))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"effectiveDate",className:"block text-sm font-medium text-light-gray-500 dark:text-light-gray",children:"\uc801\uc6a9 \uc2dc\uc791\uc77c"}),(0,d.jsx)("input",{type:"date",id:"effectiveDate",value:b,onChange:e=>p(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-light-gray-300 rounded-md shadow-md focus:outline-none focus:ring-primary focus:border-primary text-sm bg-light-bg dark:bg-dark-gray-200 text-light-text dark:text-dark-text"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"hourlyRate",className:"block text-sm font-medium text-light-gray-500 dark:text-light-gray",children:"\uc2dc\uae09 (\uc6d0)"}),(0,d.jsx)("input",{type:"number",id:"hourlyRate",value:x,onChange:e=>h(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-light-gray-300 rounded-md shadow-md focus:outline-none focus:ring-primary focus:border-primary text-sm bg-light-bg dark:bg-dark-gray-200 text-light-text dark:text-dark-text",placeholder:"\uc608: 10000"})]})]}),(0,d.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,d.jsx)("button",{onClick:a,className:"px-6 py-3 bg-medium-gray text-white rounded-full font-medium hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-medium-gray focus:ring-opacity-50 transition-all duration-200 ease-in-out transform hover:scale-105",children:"\ucde8\uc18c"}),(0,d.jsx)("button",{onClick:()=>{c&&v&&(l(v,x,b),a())},className:"px-6 py-3 bg-mint-green text-white rounded-full font-medium hover:bg-mint-green-dark focus:outline-none focus:ring-2 focus:ring-mint-green focus:ring-opacity-50 transition-all duration-200 ease-in-out transform hover:scale-105",children:"\uc800\uc7a5"})]})]})}):null}},8188:(e,t,a)=>{a.d(t,{a:()=>s});var r=a(5043);const o=new class{constructor(){this.openModals=0}openModal(){this.openModals++,1===this.openModals&&(document.body.classList.add("modal-open"),console.log("\ud83d\udd35 \ubaa8\ub2ec \uc2dc\uc2a4\ud15c \ud65c\uc131\ud654: ".concat(this.openModals,"\uac1c")))}closeModal(){this.openModals<=0||(this.openModals--,0===this.openModals&&(document.body.classList.remove("modal-open"),console.log("\ud83d\udd34 \ubaa8\ub2ec \uc2dc\uc2a4\ud15c \ube44\ud65c\uc131\ud654: ".concat(this.openModals,"\uac1c"))))}resetAllModals(){this.openModals=0,document.body.classList.remove("modal-open"),console.log("\ud83d\udd04 \ubaa8\ub4e0 \ubaa8\ub2ec \uac15\uc81c \ub9ac\uc14b")}getActiveModals(){return this.openModals}},s=()=>({openModal:(0,r.useCallback)(()=>o.openModal(),[]),closeModal:(0,r.useCallback)(()=>o.closeModal(),[]),resetAllModals:(0,r.useCallback)(()=>o.resetAllModals(),[]),getActiveModals:(0,r.useCallback)(()=>o.getActiveModals(),[])})}}]);