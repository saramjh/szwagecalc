"use strict";(self.webpackChunkszwagecalc=self.webpackChunkszwagecalc||[]).push([[421],{61:(e,a,r)=>{r.d(a,{a:()=>t,b:()=>l});const t=[{id:"brand-purple",name:"\ube0c\ub79c\ub4dc \ud37c\ud50c",value:"var(--accent-primary)",textLight:"var(--accent-text)",textDark:"var(--accent-text)",inactive:"rgba(139, 92, 246, 0.25)"},{id:"success-green",name:"\uc11d\uc138\uc2a4 \uadf8\ub9b0",value:"var(--success-primary)",textLight:"var(--text-inverse)",textDark:"var(--text-inverse)",inactive:"rgba(34, 197, 94, 0.25)"},{id:"warning-orange",name:"\uc6cc\ub2dd \uc624\ub80c\uc9c0",value:"var(--warning-primary)",textLight:"var(--text-inverse)",textDark:"var(--text-inverse)",inactive:"rgba(249, 115, 22, 0.25)"},{id:"error-red",name:"\uc5d0\ub7ec \ub808\ub4dc",value:"var(--error-primary)",textLight:"var(--text-inverse)",textDark:"var(--text-inverse)",inactive:"rgba(239, 68, 68, 0.25)"},{id:"blue",name:"\ube14\ub8e8",value:"#2563EB",textLight:"#FFFFFF",textDark:"#FFFFFF",inactive:"rgba(37, 99, 235, 0.25)"},{id:"fuchsia",name:"\ud4e8\uc2dc\uc544",value:"#C026D3",textLight:"#FFFFFF",textDark:"#FFFFFF",inactive:"rgba(192, 38, 211, 0.25)"},{id:"coffee-brown",name:"\ucee4\ud53c \ube0c\ub77c\uc6b4",value:"#8B5E3C",textLight:"#FFFFFF",textDark:"#FFFFFF",inactive:"rgba(139, 94, 60, 0.25)"}],s=t[0],n=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=t.find(a=>a.value===e);if(r)return a?r.textDark:r.textLight;if(!e)return a?"#FFFFFF":"#1F2937";if(e.startsWith("var("))return"var(--text-inverse)";const s=e.replace("#","");return(.299*parseInt(s.substr(0,2),16)+.587*parseInt(s.substr(2,2),16)+.114*parseInt(s.substr(4,2),16))/255>.5?"#1F2937":"#FFFFFF"},l=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const l=e.color||s.value,o=(i=l,t.find(e=>e.value===i)||s);var i;return a?{backgroundColor:l,color:n(l,r),borderColor:l}:{backgroundColor:o?o.inactive:"rgba(0,0,0,0.1)",color:"var(--text-secondary)",borderColor:o?o.inactive:"rgba(0,0,0,0.1)"}}},421:(e,a,r)=>{r.r(a),r.d(a,{default:()=>h});var t=r(9379),s=r(5043),n=r(5843),l=r(8188),o=r(253),i=r(9994),d=r(8521),c=r(61),u=r(6632),x=r(579);const m=e=>{let{policies:a=u.a,onPoliciesChange:r,enabled:n=!0,onEnabledChange:l,paid:o=!1,onPaidChange:i}=e;const[c,m]=(0,s.useState)(a),[g,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{m(a)},[a]);const h=(e,a,s)=>{const n=[...c];n[e]=(0,t.a)((0,t.a)({},n[e]),{},{[a]:Number(s)}),m(n),(0,u.g)(n)&&r(n)};return(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-dark-navy dark:text-white",children:"\ud734\uac8c\uc2dc\uac04 \uc815\ucc45"}),(0,x.jsx)("p",{className:"text-sm text-medium-gray dark:text-light-gray mt-1",children:"\uadfc\ub85c\uae30\uc900\ubc95\uc5d0 \ub530\ub978 \uc790\ub3d9 \ud734\uac8c\uc2dc\uac04 \uc801\uc6a9"})]}),(0,x.jsx)("button",{onClick:()=>l(!n),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-mint-green focus:ring-offset-2 ".concat(n?"bg-mint-green":"bg-gray-300 dark:bg-gray-600"),children:(0,x.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(n?"translate-x-6":"translate-x-1")})})]}),n&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("p",{className:"text-sm font-medium text-dark-navy dark:text-white",children:"\ud734\uac8c\uc2dc\uac04 \uae09\uc5ec \ud3ec\ud568"}),(0,x.jsx)("p",{className:"text-xs text-medium-gray dark:text-light-gray mt-0.5",children:"\ud734\uac8c\uc2dc\uac04\ub3c4 \uae09\uc5ec\uc5d0 \ud3ec\ud568\ud558\uc5ec \uacc4\uc0b0\ud569\ub2c8\ub2e4"})]}),(0,x.jsx)("button",{onClick:()=>i(!o),className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(o?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"),children:(0,x.jsx)("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white transition-transform ".concat(o?"translate-x-5":"translate-x-1")})})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[(0,x.jsx)("h4",{className:"text-sm font-semibold text-dark-navy dark:text-white mb-2",children:"\ud604\uc7ac \ud734\uac8c\uc2dc\uac04 \uaddc\uce59"}),(0,x.jsx)("div",{className:"space-y-2",children:c.map((e,a)=>(0,x.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,x.jsxs)("span",{className:"text-medium-gray dark:text-light-gray",children:[e.minHours,"\uc2dc\uac04 \uc774\uc0c1 ~ ",e.maxHours,"\uc2dc\uac04 \ubbf8\ub9cc"]}),(0,x.jsx)("span",{className:"font-medium text-dark-navy dark:text-white",children:(0,u.f)(e.breakMinutes)})]},a))}),(0,x.jsx)("button",{onClick:()=>b(!g),className:"w-full mt-3 px-3 py-2 text-sm text-mint-green hover:bg-mint-green/10 rounded-lg transition-colors",children:g?"\uac04\ub2e8\ud788 \ubcf4\uae30":"\uc138\ubd80 \uc124\uc815 \ud3b8\uc9d1"})]}),g&&(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,x.jsx)("h4",{className:"text-sm font-semibold text-dark-navy dark:text-white",children:"\ud734\uac8c\uc2dc\uac04 \uaddc\uce59 \ud3b8\uc9d1"}),(0,x.jsx)("button",{onClick:()=>{m(u.a),r(u.a)},className:"text-xs text-medium-gray hover:text-dark-navy dark:hover:text-white transition-colors",children:"\uae30\ubcf8\uac12\uc73c\ub85c \ubcf5\uc6d0"})]}),(0,x.jsxs)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[c.map((e,a)=>(0,x.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,x.jsx)("div",{className:"col-span-3",children:(0,x.jsx)("input",{type:"number",value:e.minHours,onChange:e=>h(a,"minHours",e.target.value),className:"w-full px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-mint-green bg-cream-white dark:bg-charcoal-gray text-dark-navy dark:text-white",min:"0",step:"0.5"})}),(0,x.jsx)("div",{className:"col-span-1 text-center text-xs text-medium-gray",children:"~"}),(0,x.jsx)("div",{className:"col-span-3",children:(0,x.jsx)("input",{type:"number",value:e.maxHours,onChange:e=>h(a,"maxHours",e.target.value),className:"w-full px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-mint-green bg-cream-white dark:bg-charcoal-gray text-dark-navy dark:text-white",min:"0",step:"0.5"})}),(0,x.jsx)("div",{className:"col-span-1 text-center text-xs text-medium-gray",children:"\u2192"}),(0,x.jsx)("div",{className:"col-span-3",children:(0,x.jsx)("input",{type:"number",value:e.breakMinutes,onChange:e=>h(a,"breakMinutes",e.target.value),className:"w-full px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-mint-green bg-cream-white dark:bg-charcoal-gray text-dark-navy dark:text-white",min:"0",step:"5"})}),(0,x.jsx)("div",{className:"col-span-1 flex justify-center",children:c.length>1&&(0,x.jsx)("button",{onClick:()=>(e=>{if(c.length<=1)return;const a=c.filter((a,r)=>r!==e);m(a),r(a)})(a),className:"p-1 text-coral-pink hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors",children:(0,x.jsx)(d.G,{size:12})})})]},a)),(0,x.jsxs)("button",{onClick:()=>{const e=c[c.length-1],a=(0,u.e)(e?e.maxHours:0,e?e.maxHours+4:4,30),t=[...c,a];m(t),r(t)},className:"w-full px-3 py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-sm text-medium-gray hover:border-mint-green hover:text-mint-green transition-colors flex items-center justify-center space-x-2",children:[(0,x.jsx)(d.A,{size:16}),(0,x.jsx)("span",{children:"\uc0c8 \uaddc\uce59 \ucd94\uac00"})]})]}),(0,x.jsx)("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:(0,x.jsx)("p",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:"\ud83d\udca1 \uadfc\ub85c\uae30\uc900\ubc95: 4~8\uc2dc\uac04\u219230\ubd84, 8\uc2dc\uac04\uc774\uc0c1\u21921\uc2dc\uac04"})})]})]})]})};var g=r(4429);const b=c.a.map(e=>({name:e.name,value:e.value})),h=e=>{let{isOpen:a,onClose:r,session:c,jobs:h,fetchJobs:y}=e;const{openModal:f,closeModal:k}=(0,l.a)(),p=(0,o.b)(),v=(0,i.b)(),[w,j]=(0,s.useState)(""),[N,_]=(0,s.useState)(""),[F,M]=(0,s.useState)(""),[C,A]=(0,s.useState)(b[0].value),[D,H]=(0,s.useState)(""),[S,E]=(0,s.useState)(null),[W,L]=(0,s.useState)("list"),[O,z]=(0,s.useState)(!0),[Y,P]=(0,s.useState)(!1),[B,I]=(0,s.useState)(u.a),[R,q]=(0,s.useState)(!0),[U,J]=(0,s.useState)(15),[G,T]=(0,s.useState)(!1),[K,Q]=(0,s.useState)(!1);(0,s.useEffect)(()=>{a?(T(!0),setTimeout(()=>Q(!0),10),f(),L("list")):(Q(!1),setTimeout(()=>{T(!1),E(null),j(""),_(""),M(""),A(b[0].value),z(!0),P(!1),I(u.a),H(""),L("list")},300),k())},[a,f,k]),(0,s.useEffect)(()=>()=>{k()},[k]);const V=()=>{E(null),j(""),_(""),M(""),A(b[0].value),z(!0),P(!1),I(u.a),q(!0),J(15),H(""),L("list")};return G?(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center transition-opacity duration-300 ease-out ".concat(K?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"," z-layer-modal p-4"),children:(0,x.jsxs)("div",{className:"bg-cream-white dark:bg-gray-900 rounded-lg shadow-lg dark:shadow-2xl dark:shadow-black/50 w-full max-w-md transform transition-all duration-300 ease-out ".concat(K?"translate-y-0":"translate-y-10"," flex flex-col max-h-[90vh]"),children:[(0,x.jsxs)("div",{className:"flex justify-between items-center p-6 pb-4 flex-shrink-0 border-b border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("h2",{className:"text-xl font-bold text-dark-navy dark:text-white",children:["list"===W&&"\uc9c1\uc5c5 \uad00\ub9ac","add"===W&&"\uc0c8 \uc9c1\uc5c5 \ucd94\uac00","edit"===W&&"\uc9c1\uc5c5 \ud3b8\uc9d1"]}),(0,x.jsx)("button",{onClick:r,className:"text-medium-gray dark:text-light-gray hover:text-dark-navy dark:hover:text-white text-2xl transition-all duration-200 ease-in-out transform hover:scale-105",children:"\xd7"})]}),(0,x.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:["list"===W&&(0,x.jsxs)("div",{className:"space-y-4 mb-6",children:[0===h.length?(0,x.jsx)("p",{className:"text-medium-gray dark:text-light-gray text-center py-4",children:"\ub4f1\ub85d\ub41c \uc9c1\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uc0c8 \uc9c1\uc5c5\uc744 \ucd94\uac00\ud574\ubcf4\uc138\uc694!"}):(0,x.jsx)("div",{className:"max-h-72 overflow-y-auto space-y-3 pr-1",children:h.map((e,a)=>(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md dark:hover:shadow-lg transition-all duration-200 overflow-hidden",children:[(0,x.jsx)("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,x.jsx)("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:e.color||"#6B7280"}}),(0,x.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,x.jsx)("h3",{className:"font-bold text-base text-dark-navy dark:text-white truncate break-keep",children:e.job_name}),e.description&&(0,x.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate break-keep mt-0.5",children:e.description})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,x.jsx)("button",{onClick:()=>(e=>{E(e),j(e.job_name),_(e.description||""),M(e.payday||""),A(e.color||b[0].value),z(!1!==e.break_time_enabled),P(e.break_time_paid||!1),I(e.break_time_policies||u.a),q(!1!==e.weekly_allowance_enabled),J(e.weekly_allowance_min_hours||15),H(""),L("edit")})(e),className:"p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-200 transition-all duration-200","aria-label":"\uc218\uc815",children:(0,x.jsx)(d.x,{size:16})}),(0,x.jsx)("button",{onClick:()=>(async e=>{c&&v("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc5b4\uc694? \uad00\ub828 \uae30\ub85d\uc774 \ubaa8\ub450 \uc0ac\ub77c\uc838\uc694.",async()=>{const{error:a}=await n.a.from("jobs").update({is_deleted:!0}).eq("id",e).eq("user_id",c.user.id);if(a)console.error("Error deleting job and related records:",a),p("\uc0ad\uc81c\ud558\uc9c0 \ubabb\ud588\uc5b4\uc694","error");else{p("\uc0ad\uc81c\ud588\uc5b4\uc694","success"),(0,u.d)(),(0,g.c)(),y();try{window.dispatchEvent(new Event("work-records-changed")),console.log("\ud83d\udcbe \uc9c1\uc5c5 \uc0ad\uc81c\ub85c \uc778\ud55c \uae09\uc5ec \uce90\uc2dc \ubb34\ud6a8\ud654 \uc644\ub8cc")}catch(r){}V()}})})(e.id),className:"p-2 rounded-lg transition-all duration-200 ".concat(0===a?"opacity-50 cursor-not-allowed text-gray-300 dark:text-gray-600":"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600"),disabled:0===a,"aria-label":"\uc0ad\uc81c",children:(0,x.jsx)(d.G,{size:16})})]})]})}),(0,x.jsxs)("div",{className:"p-4 space-y-3",children:[e.payday&&(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)(d.j,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),(0,x.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300 break-keep",children:["\ub9e4\uc6d4 ",e.payday,"\uc77c \uae09\uc5ec"]})]}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-1.5 px-2.5 py-1 rounded-full text-xs font-medium ".concat(e.break_time_enabled?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700"),children:[e.break_time_enabled?(0,x.jsx)(d.l,{className:"w-3 h-3"}):(0,x.jsx)(d.J,{className:"w-3 h-3"}),(0,x.jsx)("span",{className:"break-keep",children:"\ud734\uac8c\uc2dc\uac04"}),e.break_time_enabled&&(0,x.jsxs)("span",{className:"break-keep",children:["(",e.break_time_paid?"\uc720\uae09":"\ubb34\uae09",")"]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-1.5 px-2.5 py-1 rounded-full text-xs font-medium ".concat(e.weekly_allowance_enabled?"bg-mint-green/10 dark:bg-mint-green/20 text-mint-green-dark dark:text-mint-green border border-mint-green/30":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700"),children:[e.weekly_allowance_enabled?(0,x.jsx)(d.E,{className:"w-3 h-3"}):(0,x.jsx)(d.J,{className:"w-3 h-3"}),(0,x.jsx)("span",{className:"break-keep",children:"\uc8fc\ud734\uc218\ub2f9"}),e.weekly_allowance_enabled&&(0,x.jsxs)("span",{className:"break-keep",children:["(",e.weekly_allowance_min_hours||15,"h+)"]})]})]})]})]},e.id))}),(0,x.jsxs)("button",{onClick:()=>{E(null),j(""),_(""),M(""),A(b[0].value),z(!0),P(!1),I(u.a),q(!0),J(15),H(""),L("add")},className:"w-full px-4 py-2 bg-mint-green text-white rounded-full font-medium hover:bg-mint-green-dark focus:outline-none focus:ring-2 focus:ring-mint-green focus:ring-opacity-50 transition-all duration-200 ease-in-out transform hover:scale-105 flex items-center justify-center space-x-2",children:[(0,x.jsx)(d.A,{size:20}),(0,x.jsx)("span",{children:"\uc0c8 \uc9c1\uc5c5 \ucd94\uac00"})]})]}),("add"===W||"edit"===W)&&(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"jobName",className:"block text-sm font-medium text-medium-gray dark:text-light-gray",children:"\uc9c1\uc5c5 \uc774\ub984"}),(0,x.jsx)("input",{type:"text",id:"jobName",value:w,onChange:e=>j(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-md focus:outline-none focus:ring-mint-green focus:border-mint-green text-sm bg-cream-white dark:bg-charcoal-gray text-dark-navy dark:text-white",placeholder:"\uc608: \uce74\ud398 \uc54c\ubc14"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"jobDescription",className:"block text-sm font-medium text-medium-gray dark:text-light-gray",children:"\uc124\uba85 (\uc120\ud0dd \uc0ac\ud56d)"}),(0,x.jsx)("textarea",{id:"jobDescription",rows:"2",value:N,onChange:e=>_(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-md focus:outline-none focus:ring-mint-green focus:border-mint-green text-sm bg-cream-white dark:bg-charcoal-gray text-dark-navy dark:text-white",placeholder:"\uc608: \uc8fc\ub9d0 \uadfc\ubb34, \uc2dc\uae09 12000\uc6d0"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"payday",className:"block text-sm font-medium text-medium-gray dark:text-light-gray",children:"\uc6d4\uae09\uc77c (1-31\uc77c, \uc120\ud0dd \uc0ac\ud56d)"}),(0,x.jsx)("input",{type:"number",id:"payday",value:F,onChange:e=>{const a=e.target.value;""===a||Number(a)>=1&&Number(a)<=31?(M(a),H("")):H("\uc6d4\uae09\uc77c\uc740 1\uc5d0\uc11c 31 \uc0ac\uc774\uc758 \uc22b\uc790\uc5ec\uc57c \ud569\ub2c8\ub2e4.")},className:"mt-1 block w-full px-3 py-2 border ".concat(D?"border-red-500":"border-gray-300"," rounded-md shadow-md focus:outline-none focus:ring-mint-green focus:border-mint-green text-sm bg-cream-white dark:bg-charcoal-gray text-dark-navy dark:text-white"),placeholder:"\uc608: 25",min:"1",max:"31"}),D&&(0,x.jsx)("p",{className:"text-red-500 text-xs mt-1",children:D})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-medium-gray dark:text-light-gray",children:"\uc9c1\uc5c5 \uc0c9\uc0c1"}),(0,x.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:b.map(e=>(0,x.jsx)("button",{type:"button",onClick:()=>A(e.value),className:"w-8 h-8 rounded-full border-2 transition-transform transform hover:scale-110 ".concat(C===e.value?"ring-2 ring-offset-2 ring-mint-green dark:ring-offset-charcoal-gray":"border-transparent"),style:{backgroundColor:e.value},"aria-label":e.name},e.value))})]}),(0,x.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4",children:(0,x.jsx)(m,{policies:B,onPoliciesChange:I,enabled:O,onEnabledChange:z,paid:Y,onPaidChange:P})}),(0,x.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4",children:(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{className:"text-base font-semibold text-dark-navy dark:text-white",children:"\uc8fc\ud734\uc218\ub2f9"}),(0,x.jsx)("p",{className:"text-sm text-medium-gray dark:text-light-gray",children:"\uc8fc\uac04 \uadfc\ubb34\uc2dc\uac04\uc774 \uae30\uc900 \uc774\uc0c1\uc77c \ub54c \ud3c9\uade0 \uc77c\uae09\uc744 \uc9c0\uae09"})]}),(0,x.jsx)("button",{onClick:()=>q(!R),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ease-in-out ".concat(R?"bg-mint-green":"bg-gray-300 dark:bg-gray-600"),children:(0,x.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ease-in-out ".concat(R?"translate-x-6":"translate-x-1")})})]}),R&&(0,x.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 space-y-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"\uc8fc\uac04 \ucd5c\uc18c \uadfc\ubb34\uc2dc\uac04 (\uc2dc\uac04)"}),(0,x.jsx)("input",{type:"number",value:U,onChange:e=>J(Math.max(0,parseFloat(e.target.value)||0)),className:"w-full px-3 py-2 border border-blue-200 dark:border-blue-700 rounded-lg bg-white dark:bg-gray-800 text-blue-900 dark:text-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"15",min:"0",step:"0.5"}),(0,x.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"\uc774 \uc2dc\uac04 \uc774\uc0c1 \uadfc\ubb34 \uc2dc \uc8fc\ud734\uc218\ub2f9 \uc9c0\uae09 (\uc77c\ubc18\uc801\uc73c\ub85c 15\uc2dc\uac04)"})]}),(0,x.jsxs)("div",{className:"bg-blue-100 dark:bg-blue-800/30 rounded-lg p-3",children:[(0,x.jsx)("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"\ud83d\udca1 \uc8fc\ud734\uc218\ub2f9 \uacc4\uc0b0 \ubc29\uc2dd"}),(0,x.jsxs)("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[(0,x.jsx)("li",{children:"\u2022 \uc8fc\uac04 \ucd1d \uadfc\ubb34\uc2dc\uac04 \xf7 \uadfc\ubb34\uc77c\uc218 = \ud3c9\uade0 \uc77c \uadfc\ubb34\uc2dc\uac04"}),(0,x.jsx)("li",{children:"\u2022 \ud3c9\uade0 \uc77c \uadfc\ubb34\uc2dc\uac04 \xd7 \ud3c9\uade0 \uc2dc\uae09 = \uc8fc\ud734\uc218\ub2f9"}),(0,x.jsx)("li",{children:"\u2022 \ud734\uac8c\uc2dc\uac04\uc740 \uc81c\uc678\ud558\uace0 \uacc4\uc0b0\ub429\ub2c8\ub2e4"})]})]})]})]})})]})]}),("add"===W||"edit"===W)&&(0,x.jsx)("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,x.jsx)("button",{onClick:V,className:"px-4 py-2 bg-medium-gray text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-medium-gray focus:ring-opacity-50 transition-all duration-200 ease-in-out transform hover:scale-105",children:"\ucde8\uc18c"}),(0,x.jsx)("button",{onClick:async()=>{if(!c||!w.trim())return void p("\uc9c1\uc5c5 \uc774\ub984\uc740 \ud544\uc218\uc785\ub2c8\ub2e4.","error");if(D)return void p(D,"error");const e={job_name:w,description:N,payday:F?parseInt(F,10):null,color:C,break_time_enabled:O,break_time_paid:Y,break_time_policies:B,weekly_allowance_enabled:R,weekly_allowance_min_hours:U};if(S){const{error:r}=await n.a.from("jobs").update(e).eq("id",S.id).eq("user_id",c.user.id);if(r)console.error("Error updating job:",r),p("\uc218\uc815\ud558\uc9c0 \ubabb\ud588\uc5b4\uc694","error");else{p("\uc9c1\uc5c5 \uc815\ubcf4\ub97c \ubc14\uafe8\uc5b4\uc694","success"),(0,u.d)(),(0,g.c)(),y();try{window.dispatchEvent(new Event("work-records-changed")),console.log("\ud83d\udcbe \uc9c1\uc5c5 \uc218\uc815\uc73c\ub85c \uc778\ud55c \uae09\uc5ec \uce90\uc2dc \ubb34\ud6a8\ud654 \uc644\ub8cc")}catch(a){}L("list")}}else{const{error:r}=await n.a.from("jobs").insert([(0,t.a)((0,t.a)({},e),{},{user_id:c.user.id})]).select();if(r)console.error("Error adding job:",r),p("\ucd94\uac00\ud558\uc9c0 \ubabb\ud588\uc5b4\uc694","error");else{p("\uc0c8\ub85c\uc6b4 \uc9c1\uc5c5\uc744 \ucd94\uac00\ud588\uc5b4\uc694","success"),(0,u.d)(),(0,g.c)(),y();try{window.dispatchEvent(new Event("work-records-changed")),console.log("\ud83d\udcbe \uc9c1\uc5c5 \ucd94\uac00\ub85c \uc778\ud55c \uae09\uc5ec \uce90\uc2dc \ubb34\ud6a8\ud654 \uc644\ub8cc")}catch(a){}L("list")}}},className:"px-4 py-2 bg-mint-green text-white rounded-lg hover:bg-mint-green-dark focus:outline-none focus:ring-2 focus:ring-mint-green focus:ring-opacity-50 transition-all duration-200 ease-in-out transform hover:scale-105",children:S?"\ubcc0\uacbd \uc0ac\ud56d \uc800\uc7a5":"\uc9c1\uc5c5 \ucd94\uac00"})]})})]})}):null}},4429:(e,a,r)=>{r.d(a,{a:()=>f,b:()=>h,c:()=>p,d:()=>v,e:()=>k,f:()=>y});var t=r(9379),s=r(446),n=r.n(s),l=r(6865),o=r.n(l),i=r(7140),d=r.n(i),c=r(4462),u=r.n(c),x=r(8933),m=r.n(x),g=r(6632);n().extend(o()),n().extend(d()),n().extend(u()),n().extend(m());const b=new Map;function h(e,a){if(null===a||void 0===a||!a.weekly_allowance_enabled)return{eligible:!1,totalWorkHours:0,averageHourlyRate:0,allowanceAmount:0,workDays:0,reason:"\uc8fc\ud734\uc218\ub2f9 \uc801\uc6a9 \uc548\ud568"};const r=a.weekly_allowance_min_hours||15;let t=0,s=0,n=0,l=!1;const o=new Set;for(const u of e){if(u.job_id!==a.id||"hourly"!==u.wage_type)continue;if(u.is_unexcused_absence&&(l=!0),!u.start_time||!u.end_time)continue;t+=(0,g.c)(u.start_time,u.end_time,u.jobs||a).workHours,s+=(u.daily_wage||0)-(u.meal_allowance||0),o.add(u.date)}if(n=o.size,l)return{eligible:!1,totalWorkHours:Math.round(100*t)/100,averageHourlyRate:0,allowanceAmount:0,workDays:n,hasUnexcusedAbsence:!0,reason:"\ubb34\ub2e8\uacb0\uadfc\uc73c\ub85c \uc778\ud55c \uc8fc\ud734\uc218\ub2f9 \uc9c0\uae09 \ubd88\uac00"};if(t<r)return{eligible:!1,totalWorkHours:Math.round(100*t)/100,averageHourlyRate:0,allowanceAmount:0,workDays:n,hasUnexcusedAbsence:!1,reason:"\uc8fc\uac04 \uadfc\ubb34\uc2dc\uac04 \ubd80\uc871 (".concat(t.toFixed(1),"\uc2dc\uac04 < ").concat(r,"\uc2dc\uac04)")};if(0===n)return{eligible:!1,totalWorkHours:Math.round(100*t)/100,averageHourlyRate:0,allowanceAmount:0,workDays:0,hasUnexcusedAbsence:!1,reason:"\ud574\ub2f9 \uc9c1\uc5c5 \uadfc\ubb34\uc77c \uc5c6\uc74c"};const i=s>0?Math.round(s/t):0,d=t/n,c=Math.round(d*i);return{eligible:!0,totalWorkHours:Math.round(100*t)/100,averageHourlyRate:i,allowanceAmount:c,workDays:n,avgDailyHours:Math.round(100*d)/100,hasUnexcusedAbsence:!1,reason:"\uc8fc\ud734\uc218\ub2f9 \uc9c0\uae09 \ub300\uc0c1"}}function y(e,a){const r=n()(a),t=r.startOf("isoWeek"),s=r.endOf("isoWeek");return e.filter(e=>{const a=n()(e.date);return a.isSameOrAfter(t,"day")&&a.isSameOrBefore(s,"day")})}function f(e,a,r){const t=n()(r),s=t.startOf("month"),l=t.endOf("month"),o=[];let i=s.startOf("isoWeek");for(;i.isBefore(l)||i.isSame(l,"week");)o.push(i),i=i.add(1,"week");let d=0,c=0;const u=new Map;for(const n of o){const r=y(e,n);for(const e of a){if(!e.weekly_allowance_enabled)continue;const a=h(r,e);if(a.eligible&&a.allowanceAmount>0){d+=a.allowanceAmount,c++,u.has(e.id)||u.set(e.id,{jobName:e.job_name,jobColor:e.color,totalAmount:0,weekCount:0});const r=u.get(e.id);r.totalAmount+=a.allowanceAmount,r.weekCount++}}}return{totalAllowance:d,eligibleWeeks:c,totalWeeks:o.length,jobAllowances:Array.from(u.values())}}function k(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const s=n()(r),l=h(y(e,s),a),o=s.startOf("isoWeek"),i=s.endOf("isoWeek"),d=i.diff(o,"day")+1,c=s.diff(o,"day")+1,u=(null===a||void 0===a?void 0:a.weekly_allowance_min_hours)||15,x=Math.min(100,l.totalWorkHours/u*100);return(0,t.a)((0,t.a)({},l),{},{weekStart:o.format("YYYY-MM-DD"),weekEnd:i.format("YYYY-MM-DD"),daysInWeek:d,daysPassed:c,progressPercent:Math.round(x),hoursNeeded:Math.max(0,u-l.totalWorkHours),isCurrentWeek:!0})}function p(){b.clear()}function v(e){const a=n()(e),r=a.endOf("isoWeek"),t=Math.ceil(a.date()/7);return"".concat(a.format("M\uc6d4")," ").concat(t,"\uc8fc\ucc28 (").concat(a.format("M/D"),"~").concat(r.format("M/D"),")")}},8188:(e,a,r)=>{r.d(a,{a:()=>n});var t=r(5043);const s=new class{constructor(){this.openModals=0}openModal(){this.openModals++,1===this.openModals&&(document.body.classList.add("modal-open"),console.log("\ud83d\udd35 \ubaa8\ub2ec \uc2dc\uc2a4\ud15c \ud65c\uc131\ud654: ".concat(this.openModals,"\uac1c")))}closeModal(){this.openModals<=0||(this.openModals--,0===this.openModals&&(document.body.classList.remove("modal-open"),console.log("\ud83d\udd34 \ubaa8\ub2ec \uc2dc\uc2a4\ud15c \ube44\ud65c\uc131\ud654: ".concat(this.openModals,"\uac1c"))))}resetAllModals(){this.openModals=0,document.body.classList.remove("modal-open"),console.log("\ud83d\udd04 \ubaa8\ub4e0 \ubaa8\ub2ec \uac15\uc81c \ub9ac\uc14b")}getActiveModals(){return this.openModals}},n=()=>({openModal:(0,t.useCallback)(()=>s.openModal(),[]),closeModal:(0,t.useCallback)(()=>s.closeModal(),[]),resetAllModals:(0,t.useCallback)(()=>s.resetAllModals(),[]),getActiveModals:(0,t.useCallback)(()=>s.getActiveModals(),[])})}}]);